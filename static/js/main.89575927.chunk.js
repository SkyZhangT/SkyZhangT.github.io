(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(11),r=a.n(i),s=(a(115),a(40)),o=a(13),l=(a(116),a(10)),j=a(185),b=a(102),u=a(55),d=a(186),h=a(187),O=a(175),x=a(45),p=a.n(x),g=a(57),m=a(63),f=a(92),v=a.n(f),k=a(90),y=a.n(k),N=a(93),C=a.n(N),S=a(177),w=a(179),T=a(194),D=a(181),F=a(182),I=a(197),B=a(180),L=a(99),P=a(198),M=a(183),E=a(184),z=a(89),A=a.n(z),G=a(88),H=a.n(G),R="https://oc43214.ml",W=a(91),U=a.n(W),J=a(46),V=a.n(J),Y=function(e,t,a,n,c){return new Promise((function(i,r){V()({url:R+e,method:t,data:c,headers:{"Content-Type":n,Authorization:a}}).then((function(e){console.log(e),i(e)})).catch((function(e){console.log(e),r(e)}))}))},Z=a(2),_=Object(O.a)((function(e){return{card:{height:"100%"},media:{paddingTop:"77.25%",position:"relative",height:"100%",objectFit:"fill",justifyContent:"center",alignItems:"center",backgroundColor:"#e8eaed"},navbeforebutton:{position:"absolute",background:"transparent",color:"black",top:"0",left:"0",minHeight:"100%",minWidth:"10%"},navnextbutton:{position:"absolute",background:"transparent",color:"black",top:"0",right:"0",minHeight:"100%",minWidth:"10%"},imageClick:{position:"absolute",background:"transparent",top:"30%",right:"30%",minHeight:"40%",minWidth:"40%"},radioGroup:{justifyContent:"center"},comment:{marginLeft:"auto"},avatar:{backgroundColor:m.a[500]}}})),q=function(e){var t=_(),a=c.a.useState(0),n=Object(l.a)(a,2),i=n[0],r=n[1],s=c.a.useState(null),o=Object(l.a)(s,2),j=o[0],d=o[1],h=c.a.useState(!1),O=Object(l.a)(h,2),x=O[0],m=O[1],f=c.a.useState(e.data.likes),k=Object(l.a)(f,2),N=k[0],z=k[1],G=new Date(e.data.time),W=e.data.images.length,J="";e.data.user.split(" ").forEach((function(e){J+=e.charAt(0)}));var V=function(){r(i+1===W?0:i+1)},q=function(){r(0===i?W-1:i-1)},K=function(e){r(parseInt(e.target.value))},Q=function(){var t=Object(g.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x){t.next=17;break}return t.prev=1,t.next=4,Y("/like/"+e.data.id,"put","","application/json",{inc:!0});case 4:if(200!==(n=t.sent).status){t.next=9;break}z(n.data),t.next=11;break;case 9:return console.log(n.status),t.abrupt("return");case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return");case 16:m(!0);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),X=function(){d(null)};return Object(Z.jsxs)(D.a,{raised:!1,className:t.card,children:[Object(Z.jsx)(F.a,{avatar:Object(Z.jsx)(I.a,{"aria-label":"avatar",className:t.avatar,children:J}),action:Object(Z.jsxs)("div",{children:[Object(Z.jsx)(B.a,{"aria-label":"settings",onClick:function(e){d(e.currentTarget)},children:Object(Z.jsx)(y.a,{})}),Object(Z.jsx)(L.a,{id:"simple-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:X,children:Object(Z.jsxs)(P.a,{onClick:X,children:[Object(Z.jsx)(U.a,{}),Object(Z.jsx)(u.a,{children:"Delete"})]})})]}),title:"".concat(e.data.title," @ ").concat(e.data.location),subheader:G.toString()}),Object(Z.jsxs)(M.a,{className:t.media,image:"".concat(R).concat(e.data.images[i]),children:[e.data.images.length>1?Object(Z.jsxs)(c.a.Fragment,{children:[Object(Z.jsx)(S.a,{className:t.navbeforebutton,onClick:q,children:Object(Z.jsx)(H.a,{fontSize:"large"})}),Object(Z.jsx)(S.a,{className:t.navnextbutton,onClick:V,children:Object(Z.jsx)(A.a,{fontSize:"large"})})]}):void 0,Object(Z.jsx)(b.a,{onClick:function(t){window.open("".concat(R).concat(e.data.images[i]),"_blank")},className:t.imageClick,elevation:0})]}),e.data.images.length>1?Object(Z.jsx)(w.a,{disableSpacing:!0,className:t.radioGroup,children:e.data.images.map((function(e,t){return Object(Z.jsx)(T.a,{checked:i===t,onChange:K,name:"radio-button",size:"small",value:t},t)}))}):void 0,Object(Z.jsx)(E.a,{children:Object(Z.jsx)(u.a,{variant:"body2",color:"textPrimary",component:"p",children:e.data.text})}),Object(Z.jsxs)(w.a,{disableSpacing:!0,children:[Object(Z.jsx)(B.a,{"aria-label":"favorites",onClick:Q,style:{color:x?"#f44336":"default"},children:Object(Z.jsx)(v.a,{})}),Object(Z.jsx)(u.a,{children:"".concat(N)}),Object(Z.jsx)(B.a,{className:t.comment,"aria-label":"comment",children:Object(Z.jsx)(C.a,{})})]})]})},K=a(94),Q=a.n(K),X=a.p+"static/media/Gintama.003ffb3c.jpeg",$=Object(O.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,position:"relative",minHeight:200},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},card:{paddingTop:e.spacing(.5)}}})),ee=function(e){var t=$(),a=Object(n.useState)(0),c=Object(l.a)(a,2),i=c[0],r=c[1],o=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],i=a[1],r=Object(n.useState)(!0),s=Object(l.a)(r,2),o=s[0],j=s[1],b=Object(n.useState)(!1),u=Object(l.a)(b,2),d=u[0],h=u[1],O=Object(n.useState)(!0),x=Object(l.a)(O,2),p=x[0],g=x[1];return Object(n.useEffect)((function(){j(!0),h(!1),console.log(e),V()({method:"GET",url:R+"/post",params:{page:e},cancelToken:new V.a.CancelToken((function(e){return e}))}).then((function(e){i((function(t){return t.concat(e.data)})),g(e.data.length>0),j(!1)})).catch((function(e){V.a.isCancel(e)||(console.log(e),j(!1),h(!0))}))}),[e]),{loading:o,error:d,posts:c,hasMore:p}}(i),O=o.posts,x=o.loading,p=o.error,g=o.hasMore,m=Object(n.useRef)(),f=Object(n.useCallback)((function(e){x||(m.current&&m.current.disconnect(),m.current=new IntersectionObserver((function(e){e[0].isIntersecting&&g&&r(i+1)})),e&&m.current.observe(e))}),[x,g]);return Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsxs)(d.a,{container:!0,spacing:1,children:[Object(Z.jsx)(d.a,{item:!0,lg:3}),Object(Z.jsxs)(d.a,{item:!0,xs:12,lg:6,children:[Object(Z.jsx)("div",{children:O.map((function(e,a){return O.length===a+1?Object(Z.jsx)("div",{className:t.card,ref:f,children:Object(Z.jsx)(q,{data:e})},e.id):Object(Z.jsx)("div",{className:t.card,children:Object(Z.jsx)(q,{data:e})},e.id)}))}),function(){if(x&&!p)return Object(Z.jsx)("div",{className:t.card,children:Object(Z.jsx)(j.a,{})})}(),function(){if(p)return Object(Z.jsx)("div",{className:t.card,children:Object(Z.jsxs)(b.a,{children:[Object(Z.jsx)(u.a,{variant:"h5",style:{width:"95%",paddingTop:"0.5rem"},children:"Oops, looks like we failed to load the content. It is because either you need a new service provider or the backend server is on its vacation. It is definitely not due to any technical issues."}),Object(Z.jsx)("img",{src:X,alt:"error",style:{width:"95%",paddingTop:"0.5rem"}}),Object(Z.jsx)(u.a,{variant:"h5",style:{width:"95%",paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:"Refresh the page to retry"})]})})}()]}),Object(Z.jsx)(d.a,{item:!0,lg:3})]}),Object(Z.jsx)(s.b,{to:"/newpost",style:{textDecoration:"none"},children:Object(Z.jsx)(h.a,{color:"primary",className:t.fab,"aria-label":"add",children:Object(Z.jsx)(Q.a,{})})})]})},te=function(e){return Object(Z.jsx)("main",{children:Object(Z.jsx)(u.a,{variant:"h1",children:"This is about"})})},ae=a(95),ne=a(192),ce=function(){var e=new Date,t=e.getUTCDate().toString(),a=(e.getUTCMonth()+1).toString(),n=e.getUTCFullYear().toString();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),n+"-"+a+"-"+t},ie=a(196),re=a(188);var se=function(e){var t=e.onClose,a=e.open,n=e.Notification;return Object(Z.jsx)(ie.a,{onClose:function(){t()},"aria-labelledby":"simple-dialog-title",open:a,children:Object(Z.jsx)(re.a,{id:"simple-dialog-title",children:n})})},oe=a(100),le=a(189),je=a(193);var be=function(e){var t="primary";return e.status<0&&(t="secondary"),Object(Z.jsxs)(je.a,{display:"flex",alignItems:"center",children:[Object(Z.jsx)(je.a,{width:"100%",mr:1,children:Object(Z.jsx)(le.a,Object(oe.a)({color:t,variant:"determinate"},e))}),Object(Z.jsx)(je.a,{minWidth:35,children:Object(Z.jsx)(u.a,{variant:"body2",color:"textSecondary",children:0===e.status?"".concat(Math.round(e.value),"%"):1===e.status?"Finished":-1===e.status?"Error":"Ready"})})]})},ue=a(97),de=a.n(ue),he=a(96),Oe=a.n(he),xe=Object(O.a)((function(e){return{root:{position:"relative",minHeight:"200px",padding:"1rem"},line:{paddingTop:e.spacing(1)},title:{width:"30%",spacing:e.spacing(1)},location:{width:"30%",marginLeft:"2.5%"},date:{width:"30%",marginLeft:"2.5%"},description:{width:"95%"},image:{maxWidth:"95%"},input:{display:"none"},imageButton:{backgroundColor:"black",color:"gray"},publishButton:{backgroundColor:"inherit",color:"orange"}}})),pe=function(e){var t=xe(),a=Object(n.useState)([]),c=Object(l.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)([]),o=Object(l.a)(s,2),h=o[0],O=o[1],x=Object(n.useState)(""),m=Object(l.a)(x,2),f=m[0],v=m[1],k=Object(n.useState)(""),y=Object(l.a)(k,2),N=y[0],C=y[1],w=Object(n.useState)(""),T=Object(l.a)(w,2),D=T[0],F=T[1],I=Object(n.useState)(Date.now()),L=Object(l.a)(I,2),P=L[0],M=L[1],E=Object(n.useState)(""),z=Object(l.a)(E,2),A=z[0],G=z[1],H=Object(n.useState)(!0),R=Object(l.a)(H,2),W=R[0],U=R[1],J=Object(n.useState)(!0),V=Object(l.a)(J,2),_=V[0],q=V[1],K=Object(n.useState)(!0),Q=Object(l.a)(K,2),X=Q[0],$=Q[1],ee=Object(n.useState)(!1),te=Object(l.a)(ee,2),ie=te[0],re=te[1],oe=Object(n.useState)(!0),le=Object(l.a)(oe,2),je=le[0],ue=le[1],he=Object(n.useState)(!1),pe=Object(l.a)(he,2),ge=pe[0],me=pe[1],fe=Object(n.useState)(!1),ve=Object(l.a)(fe,2),ke=ve[0],ye=ve[1],Ne=Object(n.useState)(0),Ce=Object(l.a)(Ne,2),Se=Ce[0],we=Ce[1],Te=Object(n.useState)(2),De=Object(l.a)(Te,2),Fe=De[0],Ie=De[1],Be=function(e){return function(){i.splice(e,1),r(i.concat([])),h.splice(e,1),O(h.concat([]))}},Le=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,c,i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W||_||ie||X||0===h.length)){e.next=3;break}return ye(!0),e.abrupt("return");case 3:we(0),Ie(0),a=h.length+1,n=[],c=0;case 8:if(!(c<h.length)){e.next=31;break}return(i=new FormData).append("image",h[c]),e.prev=11,e.next=14,Y("/image","post",A,"multipart/form-data",i);case 14:if(200!==(r=e.sent).status&&208!==r.status){e.next=20;break}n.push(r.data),we(100*(c+1)/a),e.next=22;break;case 20:return Ie(-1),e.abrupt("return");case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(11),Ie(-1),e.abrupt("return");case 28:c++,e.next=8;break;case 31:return e.prev=31,e.next=34,Y("/post","post",A,"application/json",{user:"Sky Zhang",title:f,location:D,time:P,text:N,images:n,likes:0});case 34:if(200!==e.sent.status){e.next=40;break}we(100),Ie(1),e.next=42;break;case 40:return Ie(-1),e.abrupt("return");case 42:e.next=48;break;case 44:return e.prev=44,e.t1=e.catch(31),Ie(-1),e.abrupt("return");case 48:case"end":return e.stop()}}),e,null,[[11,24],[31,44]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsx)("div",{children:Object(Z.jsxs)(d.a,{container:!0,spacing:1,children:[Object(Z.jsx)(d.a,{item:!0,lg:3}),Object(Z.jsx)(d.a,{item:!0,xs:12,lg:6,children:Object(Z.jsxs)(b.a,{className:t.root,children:[Object(Z.jsxs)("div",{className:t.line,children:[Object(Z.jsx)(ne.a,{id:"title",label:"Title",type:"text",error:W,className:t.title,onChange:function(e){v(e.target.value),e.target.value.length>0?U(!1):U(!0)}}),Object(Z.jsx)(ne.a,{id:"location",label:"Location",type:"text",error:W,className:t.location,onChange:function(e){F(e.target.value),e.target.value.length>0?$(!1):$(!0)}}),Object(Z.jsx)(ne.a,{id:"date",label:"Date",type:"date",error:ie,defaultValue:ce(),className:t.date,InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target.value.split("-"),a=new Date(t[0],t[1]-1,t[2]);null==a.getTime()||a.getTime()>Date.now()?re(!0):(re(!1),M(a.getTime()))}})]}),Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsx)(ne.a,{id:"text",label:"Description",type:"text",error:_,rows:4,rowsMax:4,multiline:!0,className:t.description,onChange:function(e){C(e.target.value),e.target.value.length>0?q(!1):q(!0)}})}),i.map((function(e,a){return Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsx)("img",{src:e,className:t.image,onClick:Be(a),alt:"Failed to load"})},"img"+a.toString())})),function(){if(ge)return Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsx)(j.a,{})})}(),Object(Z.jsxs)("div",{className:t.line,children:[Object(Z.jsx)("input",{accept:"image/*",className:t.input,id:"image",multiple:!0,type:"file",onChange:function(e){me(!0);var t,a=[],n=new FileReader,c=Object(ae.a)(e.target.files);try{for(c.s();!(t=c.n()).done;){var s=t.value;h.push(s)}}catch(o){c.e(o)}finally{c.f()}!function t(c){var s=e.target.files[c];if(c>=e.target.files.length)return r(i.concat(a)),void me(!1);n.onload=function(e){a=a.concat(n.result),t(c+1)},n.readAsDataURL(s)}(0)}}),Object(Z.jsx)("label",{htmlFor:"image",children:Object(Z.jsx)(B.a,{component:"span",className:t.imageButton,variant:"outlined",children:Object(Z.jsx)(Oe.a,{})})})]}),Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsx)(ne.a,{id:"token",label:"Pass Token",type:"text",error:je,className:t.title,onChange:function(e){G(e.target.value),e.target.value.length>0?ue(!1):ue(!0)}})}),Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsxs)(S.a,{className:t.publishButton,variant:"outlined",onClick:Le,disabled:0===Fe,children:[Object(Z.jsx)(de.a,{}),Object(Z.jsx)(u.a,{children:"Publish"})]})}),Object(Z.jsx)("div",{className:t.line,children:Object(Z.jsx)(be,{variant:"determinate",status:Fe,value:Se})}),Object(Z.jsx)(se,{open:ke,onClose:function(){ye(!1)},Notification:"Invalid Post"})]})}),Object(Z.jsx)(d.a,{item:!0,lg:3})]})})},ge=a(190),me=a(191),fe=a(98),ve=a.n(fe),ke=Object(O.a)((function(e){return{root:{display:"flex"},link:{position:"relative",top:"1em",background:"white"},button:{margin:e.spacing(1),color:"inherit"}}})),ye=function(e){var t=ke();return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(ge.a,{className:t.root,children:Object(Z.jsx)(me.a,{children:Object(Z.jsxs)(d.a,{container:!0,spacing:1,children:[Object(Z.jsx)(d.a,{item:!0,xs:3,sm:2,lg:1,children:Object(Z.jsx)(s.b,{to:"/",style:{textDecoration:"none"},children:Object(Z.jsx)(S.a,{className:t.link,children:"Gallery"})})}),Object(Z.jsx)(d.a,{item:!0,xs:3,sm:2,lg:1,children:Object(Z.jsx)(s.b,{to:"/about",style:{textDecoration:"none"},children:Object(Z.jsx)(S.a,{className:t.link,children:"About"})})}),Object(Z.jsx)(d.a,{item:!0,xs:5,sm:7,lg:9}),Object(Z.jsx)(d.a,{item:!0,xs:1,children:Object(Z.jsx)(B.a,{"aria-label":"login",edge:"end",className:t.button,children:Object(Z.jsx)(ve.a,{size:"medium"})})})]})})}),Object(Z.jsx)(me.a,{})]})};var Ne=function(){return Object(Z.jsx)(s.a,{children:Object(Z.jsxs)("div",{className:"App",children:[Object(Z.jsx)(ye,{}),Object(Z.jsxs)(o.c,{children:[Object(Z.jsx)(o.a,{exact:!0,path:"/",component:ee}),Object(Z.jsx)(o.a,{exact:!0,path:"/about",component:te}),Object(Z.jsx)(o.a,{exact:!0,path:"/newpost",component:pe})]})]})})},Ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,201)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(Z.jsx)(c.a.StrictMode,{children:Object(Z.jsx)(Ne,{})}),document.getElementById("root")),Ce()}},[[143,1,2]]]);
//# sourceMappingURL=main.89575927.chunk.js.map